<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: Developer&#39;s Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bluevia&#160;<span id="projectnumber">1.5</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Developer's Guide </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="getting_started_system_req_sec"></a>
System requirements</h2>
<ul>
<li>
<a href="http://php.net/manual/en/book.curl.php" target="blank">PHP Curl extension</a>. </li>
<li>
<a href="http://framework.zend.com/" target="blank">Zend Framework &gt;= 1.10</a>. </li>
</ul>
<h2><a class="anchor" id="programming_guidelines_sec"></a>
Programming guidelines</h2>
<p>This section is a basic introduction to the Bluevia framework. This guide explains the library behavior and architecture, its working modes and the security model, based in OAuth, and how to start developing and testing PHP applications using the Bluevia APIs. In the API guides section several complete code examples for each API will be provided.</p>
<p>In order to complete the documentation of the Bluevia library, you should check the Reference section for API specifications.</p>
<h3><a class="anchor" id="programming_guidelines_framework_sec"></a>
Bluevia library framework</h3>
<p>PHP for BlueVia allows you to use the BueVia public API from your PHP application using just few lines of code. The library makes use of Zend Framework classes, more specifically <a href="http://framework.zend.com/manual/en/zend.http.html">Zend_Http</a> and <a href="http://framework.zend.com/manual/en/zend.oauth.html">Zend_Oauth</a>.</p>
<p>When you want to use Bluevia public APIs as a developer, first of all you will need to get an API Key from <a href="https://bluevia.com.">https://bluevia.com.</a></p>
<p>PHP SDK wraps requests to BlueVia APIs by using the generic object <a class="el" href="class_bluevia_client.html">BlueviaClient</a>. This object uses the Component Pattern to fetch any service required by the developer (oAuth, SMS, MMS, Directory, Advertising, Location or Payment).</p>
<p>To define functionality required for each API keys, three modes (live, sandbox or test) can be selected when creating the BlueVia client. Live and test environment are connected to Movistar and O2 network, and sandbox is used just on development stage to verify application behavior. You can get more information on that point at <a href="https://bluevia.com/en/knowledge/getStarted.Sandbox-and-Live-environments">Live, Test and Sandbox</a> First of all choose one of the three modes:</p>
<div class="fragment"><pre class="fragment">        $mode = Bluevia_Api_Contants::TEST_MODE;
</pre></div><p> or </p>
<div class="fragment"><pre class="fragment">        $mode = Bluevia_Api_Contants::SANDBOX_MODE;
</pre></div><p> or </p>
<div class="fragment"><pre class="fragment">        $mode = Bluevia_Api_Contants::LIVE_MODE;
</pre></div><p>The next step is creating a new object with valid credentials that identify the application:</p>
<div class="fragment"><pre class="fragment">  $application_context = array(
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
      <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
      <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET
    )
  );
  $bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($mode,$application_context);
</pre></div><h3><a class="anchor" id="programming_guidelines_oauth_sec"></a>
Using OAuth</h3>
<p>User authentication is performed using oAuth protocol, so user is not required to use credentials in third party applications. If you want to learn more about oAuth please check this URL: <a href="http://oauth.net.">http://oauth.net.</a></p>
<p>When an user wants to launch the oAuth process, once the Bluevia client object has been created only the two lines below are required to retrieve a valid token for user: </p>
<div class="fragment"><pre class="fragment">  $oauth = $bv-&gt;getService(<span class="stringliteral">&#39;Oauth&#39;</span>);
  $token = $oauth-&gt;getRequestToken(APP_URL);
</pre></div><p> The retrieved parameter token and secret should be used during the oAuth process, and url is the endpoint where Bluevia shall authenticate the user. In case of a PHP application, it is automatically performed using Zend_Oauth library.</p>
<p>Both token and token_secret must be saved in the client side because oAuth process will require it later. They are stored inside library wrapper: Oauth.php as a cookie. </p>
<div class="fragment"><pre class="fragment">  setcookie(<span class="stringliteral">&#39;req_token&#39;</span>, serialize($token), null, <span class="charliteral">&#39;/&#39;</span>);
</pre></div><p>Once user is authenticated and he has authorized the application in BlueVia portal, he should be redirected to the URL used as parameter before (APP_URL). Now it's time to fetch the valid token and token secret that shall identify the new user during any call to BlueVia API. Lines below show an example using PHP: </p>
<div class="fragment"><pre class="fragment">  $oauth_verifier = $_GET[<span class="stringliteral">&#39;oauth_verifier&#39;</span>];
  $returned = $oauth-&gt;getAccessToken($oauth_verifier);
</pre></div><p> If token verifier is bad, or cookie has been lost, then <a class="el" href="class_bluevia_client___exception___parameters.html">BlueviaClient_Exception_Parameters</a> is thrown.</p>
<h3><a class="anchor" id="programming_guidelines_using_oauth_sec"></a>
Using OAuth to launch requests</h3>
<p>Most of requests when accessing Bluevia API are associated to a specific user, so when a <a class="el" href="class_bluevia_client.html">BlueviaClient</a> object is created both user token and user token secret must be provided to identify user on behalf of whom the application wants to access BlueVia APIs. It is responsibility of the application to store it and they are send instantiating Unica API. </p>
<div class="fragment"><pre class="fragment">  $application_context = array(
    <span class="stringliteral">&#39;user&#39;</span> =&gt; array(
      <span class="stringliteral">&#39;token_access&#39;</span> =&gt; TOKEN,
      <span class="stringliteral">&#39;token_secret&#39;</span> =&gt; TOKEN_SECRET,
    ),
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
      <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
      <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET        
    )
  );

  $bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($mode,$application_context);
</pre></div><h2><a class="anchor" id="api_guides_sec"></a>
API guides</h2>
<p>The following guides explain the behavior of each Bluevia API, including code samples to start developing a simple application in an easy way:</p>
<ul>
<li>
<a class="el" href="blv_php_sms_guide.html">SMS API</a> </li>
<li>
<a class="el" href="blv_php_mms_guide.html">MMS API</a> </li>
<li>
<a class="el" href="blv_php_directory_guide.html">User Context API</a> </li>
<li>
<a class="el" href="blv_php_ad_guide.html">Advertising API</a> </li>
<li>
<a class="el" href="blv_php_location_guide.html">Location API</a> </li>
<li>
<a class="el" href="blv_php_payment_guide.html">Payment API</a> </li>
</ul>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Mon Jan 23 2012 13:31:21 for Bluevia by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
