<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: Advertising API guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bluevia</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('blv_php_ad_guide.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Advertising API guide </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>This API enables your application or mobile website to include and advertisement adapted to the user's device screen size.</p>
<p>If you want to understand how Mobile Advertising API works please read the BlueVia <a href="https://bluevia.com/en/knowledge/APIs.API-Guides.Advertising">Mobile Advertising API guide</a>, you can also get really into the details reading <a href="https://bluevia.com/en/knowledge/APIs.API-Reference.Advertising">Mobile Advertising API reference</a>.</p>
<h2><a class="anchor" id="ad_client_set_up_sec"></a>
Mobile Advertising API client set up</h2>
<p>BlueVia uses OAuth as its authentication mechanism which enables websites and applications to access the BlueVia API's without end users disclosing their personal credentials. In order to grant access to the server any client has to be created passing the security credential as parameter in its constructor. These security credentials are managed internally and added as a HTTP header in every request sent to the server. Such Oauth security credentials are: </p>
<ul>
<li>
<p class="startli"><b>Consumer key</b><br/>
 The string identifying the application- you obtained when you registered your application within the provisioning portal.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Consumer Secret</b><br/>
 A secret -a string- used by the consumer to establish ownership of the consumer key.</p>
<p class="endli"></p>
</li>
<li>
<b>Access token</b><br/>
 The token -OAuth access token- used by the client for granting access permissions to the server </li>
</ul>
<p>As detailed previosly, you have to set up your <a class="el" href="class_bluevia_client.html">BlueviaClient</a> object: </p>
<div class="fragment"><pre class="fragment">application_context = array(
    <span class="stringliteral">&#39;user&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;token_access&#39;</span> =&gt; $token,
        <span class="stringliteral">&#39;token_secret&#39;</span> =&gt; $token_secret,
    ),
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
        <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET        
    )
);
$bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($application_context);
</pre></div><p> Once configured, you are able to get your Mobile Advertising API client: </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Get User Context information API client</span>
$advertising = $bv-&gt;getService(<span class="stringliteral">&#39;Advertising&#39;</span>);
</pre></div><h3><a class="anchor" id="ad_two_legged_subsec"></a>
AdvertisingClient features: Oauth 2-legged</h3>
<p>Some applications will only use the Advertising API, which does not need to be given permissions by the final user. Bluevia supports Oauth authentication without oauth token, which is called 2-legged version. In this case the client just need the Consumer key and Consumer secret credentials, so the <a class="el" href="class_bluevia_client.html">BlueviaClient</a> object must be constructed this way: </p>
<div class="fragment"><pre class="fragment">$application_context_2legged = array(
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
      <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
      <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET        
    )
  );
$bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($application_context_2legged);  
</pre></div><h2><a class="anchor" id="ad_getting_ad_sec"></a>
Getting an Ad</h2>
<p>Once configured, your client is ready to get advertisements according to the user's device screen resolution. You don't have to worry about that, just set up the UserAgent before requesting the advertisement. </p>
<div class="fragment"><pre class="fragment">$response = $advertising-&gt;request(
        array(
            <span class="stringliteral">&#39;user_agent&#39;</span> =&gt; <span class="stringliteral">&#39;Mozilla50&#39;</span>,
            <span class="stringliteral">&#39;ad_request_id&#39;</span> =&gt; <span class="stringliteral">&#39;103712010081010020bf31d750&#39;</span>,
            <span class="stringliteral">&#39;ad_space&#39;</span> =&gt; <span class="stringliteral">&#39;10371&#39;</span>,
            <span class="stringliteral">&#39;ad_presentation&#39;</span>=&gt;<span class="stringliteral">&#39;0101&#39;</span>,
            <span class="stringliteral">&#39;protection_policy&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span>,
        )
);
</pre></div><p>The ad space is the identifier you got when requesting your API key.</p>
<p>On the :ad_presentation you have to select the ad format text ("'0104") or image banner ("'0101").</p>
<p>Take into account that the Protection Policy sets the rules for adult advertising, please be careful. </p>
<table  border="1">
<tr>
<th>protection_policy </th><th>Policy applied  </th></tr>
<tr>
<td>1 </td><td>Low, moderately explicit content (I am youth; you can show me moderately explicit content)  </td></tr>
<tr>
<td>2 </td><td>Safe, not rated content (I am a kid, please, show me only safe content)  </td></tr>
<tr>
<td>3 </td><td>High, explicit content (I am an adult; I am over 18 so you can show me any content including very explicit content)  </td></tr>
</table>
<h2><a class="anchor" id="ad_showing_ad_sec"></a>
Showing and Ad</h2>
<p>Once you retrieved the ad, you can get the advertisement and click link to include it on your mobile website: </p>
<div class="fragment"><pre class="fragment"><span class="comment">// print response</span>
<span class="keywordflow">if</span> (is_array($response)) {
    print <span class="stringliteral">&quot;&lt;p style=&#39;color:green&#39;&gt; SUCCESS!: &lt;/p&gt; </span>
<span class="stringliteral">        &lt;textarea rows=&#39;10&#39; cols=&#39;140&#39;&gt;&quot;</span>. print_r($response,1) . <span class="stringliteral">&quot;&lt;/textarea&gt;&lt;br/&gt;&quot;</span>;
} <span class="keywordflow">else</span> {
    print <span class="stringliteral">&#39;&lt;p style=&quot;color:red&quot;&gt; ERROR &lt;/p&gt;&#39;</span>;
}
</pre></div> </div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Tue Nov 15 2011 10:19:21 for Bluevia by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
