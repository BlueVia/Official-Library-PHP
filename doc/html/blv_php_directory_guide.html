<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: User Context API guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bluevia&#160;<span id="projectnumber">1.5</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('blv_php_directory_guide.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>User Context API guide </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>This API enables an application to get information about the user's context, you can get information about user's profile, connection and device.</p>
<p>If you want to understand how User Context API works please read the <a href="https://bluevia.com/en/knowledge/APIs.API-Guides.GetUserInformation">BlueVia User context information API guide</a>, you can also get really into the details reading <a href="https://bluevia.com/en/knowledge/APIs.API-Reference.GetUserInformation">User context information API reference</a></p>
<h2><a class="anchor" id="directory_set_up_sec"></a>
User Information Context API client set up</h2>
<p>To get profile information at your application you have to set up your client to receive profile information from the user who authorized your app: As detailed in the Programming guidelines , you have to set up your <a class="el" href="class_bluevia_client.html">BlueviaClient</a> object:</p>
<div class="fragment"><pre class="fragment">application_context = array(
    <span class="stringliteral">&#39;user&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;token_access&#39;</span> =&gt; $token,
        <span class="stringliteral">&#39;token_secret&#39;</span> =&gt; $token_secret,
    ),
    <span class="stringliteral">&#39;app&#39;</span> =&gt; array(
        <span class="stringliteral">&#39;consumer_key&#39;</span> =&gt; CONSUMER_KEY,
        <span class="stringliteral">&#39;consumer_secret&#39;</span> =&gt; CONSUMER_SECRET        
    )
);
$bv = <span class="keyword">new</span> <a class="code" href="class_bluevia_client.html">BlueviaClient</a>($mode, $application_context);
</pre></div><p>Once configured, you are able to get your User Context Information API client: </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Get User Context information API client</span>
$user_context = $bv-&gt;getService(<span class="stringliteral">&#39;Directory&#39;</span>);
</pre></div><p>/section directory_getting_profile_sec Getting Profile Information You can get information about the user's customer profile in order to personalize your application or just know more about your users to targetize better your product.</p>
<p>Once your client is configured to get information from the user, you have to do the following request:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// User Profile</span>
<span class="keywordflow">try</span> {
    $user_info = $user_context-&gt;getUserInfo(BlueviaClient_Api_Directory::USER_PROFILE); 
     print <span class="stringliteral">&#39;&lt;p style=&quot;color:green&quot;&gt;TEST OK!&#39;</span> . print_r($user_info,1) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
} <span class="keywordflow">catch</span>(Exception $e) {
     print <span class="stringliteral">&#39;&lt;p style=&quot;color:red&quot;&gt; ERROR on getUserInfo! &#39;</span> . $e-&gt;getMessage() . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
}
</pre></div><p>You can get full information on available attributes and its meaning on User Context API guide.</p>
<h2><a class="anchor" id="directory_getting_access_info_sec"></a>
Getting Access Information</h2>
<p>You can get information about the user's network in order to adapt your content or now about the bandwidth available for them. Once your client is configured to get information from the user, you have to do the following request:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// User Access information</span>
<span class="keywordflow">try</span> {
    $user_info = $user_context-&gt;getUserInfo(BlueviaClient_Api_Directory::USER_ACCESS_INFO);
     print <span class="stringliteral">&#39;&lt;p style=&quot;color:red&quot;&gt;TEST FAILED: &#39;</span> . print_r($user_info,1) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
} <span class="keywordflow">catch</span>(<a class="code" href="class_bluevia_client___exception___parameters.html">BlueviaClient_Exception_Parameters</a> $e) {
    print <span class="stringliteral">&#39;&lt;p style=&quot;color:green&quot;&gt; TEST OK! &#39;</span> . $e-&gt;getMessage() . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
}
</pre></div><p>You can get full information on available attributes and its meaning on User Context API guide.</p>
<h2><a class="anchor" id="directory_getting_device_info_sec"></a>
Getting Device Information</h2>
<p>You can get information about the user's device if you want to adapt any content or just adjust your application behaviour to match your user's device capabilities. Once your client is configured to get information from the user, you have to do the following request:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// Device Information</span>
<span class="keywordflow">try</span> {
    $user_info = $user_context-&gt;getUserInfo(BlueviaClient_Api_Directory::USER_TERMINAL_INFO);
     print <span class="stringliteral">&#39;&lt;p style=&quot;color:red&quot;&gt;TEST FAILED: &#39;</span> . print_r($user_info,1) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
} <span class="keywordflow">catch</span>(<a class="code" href="class_bluevia_client___exception___parameters.html">BlueviaClient_Exception_Parameters</a> $e) {
    print <span class="stringliteral">&#39;&lt;p style=&quot;color:green&quot;&gt; TEST OK! &#39;</span> . $e-&gt;getMessage() . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
}
</pre></div><p>You can get full information on available attributes and its meaning on User Context API guide. </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Mon Jan 23 2012 13:31:21 for Bluevia by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
